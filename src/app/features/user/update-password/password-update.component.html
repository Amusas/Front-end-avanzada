  <!-- Botón de volver atrás -->
  <button mat-icon-button class="back-button" (click)="goBack()" aria-label="Volver">
    <mat-icon>arrow_back</mat-icon>
  </button>


<div class="password-update-container">
  <h2>Actualizar contraseña</h2>

  <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" novalidate>
    <!-- Contraseña actual -->
    <div class="field-group">
      <i class="icon fa fa-lock"></i>
      <input
        type="password"
        placeholder="Contraseña actual"
        formControlName="currentPassword"
      />
    </div>
    <div *ngIf="hasError('currentPassword', 'required')" class="error-message">
      ⚠ La contraseña actual es obligatoria.
    </div>

    <!-- Nueva contraseña -->
    <div class="field-group">
      <i class="icon fa fa-key"></i>
      <input
        type="password"
        placeholder="Nueva contraseña"
        formControlName="newPassword"
      />
    </div>
    <div *ngIf="hasError('newPassword', 'required')" class="error-message">
      ⚠ La nueva contraseña es obligatoria.
    </div>
    <div
      *ngIf="hasError('newPassword', 'minlength') || hasError('newPassword', 'maxlength')"
      class="error-message"
    >
      ⚠ Debe tener entre 8 y 50 caracteres.
    </div>
    <div *ngIf="hasError('newPassword', 'pattern')" class="error-message">
      ⚠ Debe contener al menos un dígito, una mayúscula y una minúscula.
    </div>

    <!-- Botones de acción -->
    <div class="button-group">
      <button type="submit" [disabled]="isSubmitting">
        <i *ngIf="isSubmitting" class="fas fa-spinner fa-spin"></i>
        {{ isSubmitting ? 'Actualizando...' : 'Actualizar contraseña' }}
      </button>
      <button type="button" (click)="goBack()" [disabled]="isSubmitting">
        Cancelar
      </button>
    </div>
  </form>
</div>
